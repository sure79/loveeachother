<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- 필수 메타 -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 기본 SEO 메타 -->
  <title>수비학 궁합 분석 - 재회 가능성까지 알려주는 연애 운세</title>
  <meta name="description" content="수비학으로 보는 연애·궁합 분석, 재회 가능성까지! 이름만 입력하면 김구라 톤 코멘트, 궁합 점수, 재회 팁을 알려드립니다." />
  <meta name="keywords" content="수비학, 궁합, 연애 운세, 재회 가능성, 이름 분석" />

  <!-- Canonical (원본 페이지 URL) -->
  <link rel="canonical" href="https://example.com/love-numerology" />

  <!-- (선택) 오픈그래프 메타, SNS 노출 강화 -->
  <meta property="og:title" content="수비학 궁합 분석" />
  <meta property="og:description" content="이름만 입력하면, 수비학으로 연애 궁합과 재회 가능성까지!" />
  <meta property="og:url" content="https://example.com/love-numerology" />
  <meta property="og:type" content="website" />
  <!-- 필요하다면 og:image도 추가 -->

  <!-- (선택) 트위터 카드 -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="수비학 궁합 분석" />
  <meta name="twitter:description" content="이름만 입력하면, 수비학으로 연애 궁합과 재회 가능성까지!" />

  <!-- JSON-LD 구조화 데이터 예시: WebSite + WebPage (원하시면 수정/확장 가능) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://example.com/#website",
        "url": "https://example.com/",
        "name": "수비학 궁합 분석 사이트",
        "description": "이름만 입력하면 연애·궁합·재회 가능성까지 확인!",
        "publisher": {
          "@type": "Organization",
          "name": "수비학연구소"
        }
      },
      {
        "@type": "WebPage",
        "@id": "https://example.com/love-numerology#webpage",
        "url": "https://example.com/love-numerology",
        "name": "수비학 궁합 분석 - 재회 가능성까지 알려주는 연애 운세",
        "isPartOf": {
          "@id": "https://example.com/#website"
        },
        "about": {
          "@type": "Thing",
          "name": "수비학, 연애 궁합"
        },
        "description": "이름만 입력해 연애 궁합과 재회 가능성을 확인할 수 있는 페이지."
      }
    ]
  }
  </script>

  <!-- 구글 폰트 or 기타 리소스 -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Noto Sans KR', sans-serif;
    }
    body {
      background: #fff3f6;
      padding: 20px;
      line-height: 1.6;
      min-height: 100vh;
      position: relative;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #ffffff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-bottom: 100px; /* 하단 버튼 공간 */
    }
    h1 {
      text-align: center;
      color: #e84393;
      margin-bottom: 30px;
    }
    .input-section {
      text-align: center;
      margin-bottom: 30px;
    }
    input {
      width: 80%;
      max-width: 400px;
      padding: 15px;
      font-size: 16px;
      border: 2px solid #ffc9d5;
      border-radius: 10px;
      outline: none;
      margin: 5px 0;
    }
    input:focus {
      border-color: #e84393;
    }
    button {
      display: block;
      width: 200px;
      margin: 20px auto;
      padding: 15px;
      background: #e84393;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.3s;
    }
    button:hover {
      background: #d63384;
      transform: translateY(-2px);
    }
    .result {
      display: none;
      background: #fff8fa;
      padding: 25px;
      border-radius: 10px;
      margin-top: 30px;
    }

    /* 궁합점수: 크게, 상단 */
    .compatibility-score {
      text-align: center;
      font-size: 28px;
      margin: 20px 0;
      color: #e84393;
      font-weight: bold;
    }

    .analysis-box {
      background: #ffffff;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .analysis-box h2 {
      color: #e84393;
      margin-bottom: 10px;
    }
    .highlight {
      color: #e84393;
      font-weight: bold;
    }
    .sub-title {
      margin: 15px 0 5px;
      font-weight: bold;
      color: #ad1457;
    }
    ul {
      margin-left: 20px;
      list-style-type: disc;
    }

    .kimgura-comment {
      background: #fff2f7;
      border-left: 5px solid #e84393;
      padding: 15px;
      margin-top: 20px;
      border-radius: 8px;
      color: #ad1457;
      font-style: italic;
      line-height: 1.5;
    }

    .reunion-box {
      background: #ffffff;
      margin: 20px 0;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      padding: 20px;
    }
    .reunion-title {
      color: #e84393;
      margin-bottom: 10px;
    }
    .reunion-score {
      text-align: center;
      font-size: 20px;
      margin: 10px 0;
      color: #d63384;
    }
    .reunion-comment {
      margin-top: 10px;
      font-style: italic;
      color: #ad1457;
    }

    .bottom-btns-container {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 999;
    }
    .mall-btn, .insta-btn, .kakao-btn {
      display: inline-block;
      text-decoration: none;
      background: #FEE500;
      color: #000;
      padding: 15px 20px;
      border-radius: 6px;
      font-size: 16px;
      text-align: center;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
    }
    .mall-btn {
      background: #ffd6e0; /* 자사몰 */
    }
    .insta-btn {
      background: #c5efff; /* 인스타 */
    }
    .kakao-btn {
      background: #FEE500; /* 카카오톡 채널 */
    }
    @media (max-width: 768px) {
      .mall-btn, .insta-btn, .kakao-btn {
        padding: 12px 15px;
        font-size: 14px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- 메인 헤딩 (H1) -->
    <h1>💘수비학 애정/궁합 분석💘</h1>
    <center>
      <p>이름으로 보는 수비학적 연애 궁합, 재회 가능성까지 쉽게 확인!</p>
      <p>두 사람의 이름을 입력해보세요.</p>
    </center>

    <div class="input-section">
      <div>
        <input type="text" id="userName1" placeholder="첫 번째 이름" />
      </div>
      <div>
        <input type="text" id="userName2" placeholder="두 번째 이름" />
      </div>
      <button onclick="analyzeLoveFortune()">궁합 분석하기</button>
    </div>

    <!-- 분석 결과 영역 -->
    <div id="result" class="result">
      <!-- 궁합 점수 -->
      <div class="compatibility-score">
        두 분의 궁합점수: <span id="compatibilityScore"></span>점
      </div>

      <!-- 첫 번째 사람 분석 -->
      <div id="analysis1" class="analysis-box"></div>
      <!-- 두 번째 사람 분석 -->
      <div id="analysis2" class="analysis-box"></div>

      <!-- 궁합 향상 조언 -->
      <div id="compatAdviceBox" class="analysis-box"></div>

      <!-- 재회 가능성 & 지침서 -->
      <div id="reunionBox" class="reunion-box">
        <h2 class="reunion-title">재회 가능성 & 지침서</h2>
        <div class="reunion-score">
          재회 확률: <span id="reunionScore"></span>%
        </div>
        <div id="reunionAdvice" class="reunion-comment"></div>
      </div>

      <!-- 김구라 톤 코멘트 -->
      <div id="kimguraComment" class="kimgura-comment"></div>
    </div>
  </div>

  <!-- 하단 버튼 3개: 자사몰, 인스타, 카카오채널 -->
  <div class="bottom-btns-container">
    <!-- 실 링크는 직접 수정해주세요 -->
    <a href="#" target="_blank" class="mall-btn">자사몰</a>
    <a href="#" target="_blank" class="insta-btn">인스타</a>
    <a href="#" target="_blank" class="kakao-btn">카카오톡채널</a>
  </div>

  <script>
    /***********************************************************************
     * "이름 → 숫자" 매핑
     ***********************************************************************/
    const nameToNumber = {
      /* ... (기존 nameToNumber 내용 그대로) */
      '민': 2, '임': 2, /* 등등 */ 
      '현': 11, '진': 11, /* 등등 */
    };

    /***********************************************************************
     * 각 번호별 정보(코믹한 김구라 톤)
     ***********************************************************************/
    const numberInfo = {
      /* ... (기존 numberInfo 내용 그대로) */
    };

    function pickRandom(arr) {
      if (!arr || arr.length === 0) return "";
      const idx = Math.floor(Math.random() * arr.length);
      return arr[idx];
    }

    function getNumberArray(fullName) {
      const arr = [];
      for (let ch of fullName) {
        if (nameToNumber[ch] !== undefined) {
          arr.push(nameToNumber[ch]);
        }
      }
      return arr;
    }

    function getCombinedResult(fullName) {
      const numbers = getNumberArray(fullName);
      if (!numbers.length) return null;

      let totalScore = 0;
      let basics = [], loves = [], styles = [], addls = [];
      let loveAdvicePicked = [];
      let compatAdvicePicked = [];

      numbers.forEach(num => {
        const info = numberInfo[num];
        if (info) {
          totalScore += info.loveScore;
          basics.push(info.basic);
          loves.push(info.love);
          styles.push(info.style);
          addls.push(info.additional);

          const pickLove = pickRandom(info.loveAdviceArr);
          const pickCompat = pickRandom(info.compatAdviceArr);
          if (pickLove) loveAdvicePicked.push(pickLove);
          if (pickCompat) compatAdvicePicked.push(pickCompat);
        }
      });

      const avgScore = Math.round(totalScore / numbers.length);

      const setBasic = Array.from(new Set(basics));
      const setLove = Array.from(new Set(loves));
      const setStyle = Array.from(new Set(styles));
      const setAddl = Array.from(new Set(addls));

      const sentence1 = `자 보니까, 대체로 <strong>${setBasic.join(", ")}</strong> 요런 느낌이 깔렸고,`;
      const sentence2 = `연애 쪽도 <strong>${setLove.join(", ")}</strong> 성향이 확 보이는군요?`;
      const sentence3 = `게다가 <strong>${setStyle.join(", ")}</strong> 특유의 무드를 풍기고,`;
      const sentence4 = `<strong>${setAddl.join(", ")}</strong> 이라는 점도 슬쩍 드러납니다잉~`;

      const summaryText = `${sentence1} ${sentence2} ${sentence3} ${sentence4}`;

      return {
        name: fullName,
        avgScore,
        summaryText,
        loveAdviceList: loveAdvicePicked,
        compatAdviceList: compatAdvicePicked
      };
    }

    function getCompatibility(score1, score2) {
      let diff = Math.abs(score1 - score2);
      let val = 100 - diff * 5;
      if (val < 50) val = 50;
      return val;
    }

    function getReunionProbability(score1, score2) {
      let raw = Math.round(((score1 + score2) / 2) + 5);
      if (raw < 50) raw = 50;
      if (raw > 100) raw = 100;
      return raw;
    }

    function getReunionComment(score) {
      if (score >= 90) {
        return `와우, 재회 가능성이 <strong>${score}%</strong>? 
                이 정도면 그냥 <strong>“헤어졌던 게 실수”</strong>였다는 소리인데요? 
                지금 당장 연락해도 무리 없겠는데!`;
      } else if (score >= 75) {
        return `재회 확률이 <strong>${score}%</strong>라니, 
                <strong>“조금만 노력하면 다시 붙을 수 있다”</strong> 정도로 보이네요. 
                슬쩍 메시지 날려볼 타이밍?`;
      } else {
        return `<strong>${score}%</strong>라... 
                글쎄, 아직 가능성이 아주 낮지는 않은데, 
                <strong>“조금 더 인내심”</strong>이 필요할 듯합니다. 
                그래도 세상사 모르는 거죠.`;
      }
    }

    const reunionTips = [
      "SNS 염탐 그만! 진짜로 이야기하고 싶다면 솔직하게 다가가세요.",
      "옛 추억 ‘아 그때 좋았지’ 멘트도 너무 자주 꺼내면 독이 될 수 있어요. 적당히~",
      "상대가 잠수 타면 답답하겠지만, 강요보단 이해하려는 태도가 필요!",
      "서로 서운했던 부분을 적어두었다면, 대화할 때 증거자료(?)로 쓰지 마세요!",
      "공통 지인에게 상황 중계는 오히려 역효과일 수도. 프라이버시 존중!",
      "내 장점만 어필하느라 ‘과거 잘못’을 덮으면 역효과! ‘미안함’을 살짝 표현해도 좋아요.",
      "타이밍 맞춰서 ‘그때 너 생각나더라’ 이런 식으로 문자를 보내보세요!",
      "대화 시 과거 문제를 계속 끄집어내기보단 새 시작처럼 접근해야 좋아요!",
      "혹시라도 아직도 내 마음이 확고하지 않다면, 상대에게도 시간과 여유가 필요하겠죠?",
      "무작정 달려들기보단, ‘네가 불편하지 않을 선’에서 신호 보내기. 그것이 예의!"
    ];

    function getKimguraComment(score) {
      if (score >= 90) {
        return `어이쿠야, 점수가 <strong>${score}점</strong>? 이거 뭐 <strong>“결혼각”</strong> 잡힌 거 아닌가요? 
                오늘 반지 사러 가도 손색없겠는데요?`;
      } else if (score >= 75) {
        return `오호라 <strong>${score}점</strong>이면 꽤 좋은데요~ 
                서로 성질 좀만 줄이고 양보하면 <strong>“레알 꽁냥꽁냥”</strong> 가능합니다!`;
      } else {
        return `아이구, <strong>${score}점</strong>이라... 
                뭐, 세상사 모르는 거죠! 노력하면 혹시 압니까? 
                옆집 강아지랑 친해질 확률보단 높을 수도 있어요!`;
      }
    }

    function analyzeLoveFortune() {
      const name1 = document.getElementById('userName1').value.trim();
      const name2 = document.getElementById('userName2').value.trim();

      if (!name1 || !name2) {
        alert('두 사람의 이름을 모두 입력해주세요!');
        return;
      }

      const result1 = getCombinedResult(name1);
      if (!result1) {
        alert(`이름 [${name1}]은(는) 분석하기 어렵습니다잉?`);
        return;
      }
      const result2 = getCombinedResult(name2);
      if (!result2) {
        alert(`이름 [${name2}]은(는) 분석하기 어렵습니다잉?`);
        return;
      }

      // 종합 궁합 점수
      const compScore = getCompatibility(result1.avgScore, result2.avgScore);
      document.getElementById('compatibilityScore').textContent = compScore;

      // 첫 번째 사람
      document.getElementById('analysis1').innerHTML = `
        <h2>${result1.name} 님</h2>
        <p><strong>애정점수:</strong> <span class="highlight">${result1.avgScore}점</span></p>
        <p>${result1.summaryText}</p>
        <div class="sub-title">수비학 연애 조언</div>
        <ul>
          ${result1.loveAdviceList.map(ad => `<li>${ad}</li>`).join("")}
        </ul>
      `;

      // 두 번째 사람
      document.getElementById('analysis2').innerHTML = `
        <h2>${result2.name} 님</h2>
        <p><strong>애정점수:</strong> <span class="highlight">${result2.avgScore}점</span></p>
        <p>${result2.summaryText}</p>
        <div class="sub-title">수비학 연애 조언</div>
        <ul>
          ${result2.loveAdviceList.map(ad => `<li>${ad}</li>`).join("")}
        </ul>
      `;

      // 궁합 개선 조언
      const compatAll = [...result1.compatAdviceList, ...result2.compatAdviceList];
      const uniqueAdvices = Array.from(new Set(compatAll));
      document.getElementById('compatAdviceBox').innerHTML = `
        <h2>수비학이 내놓은 궁합 개선 꿀팁</h2>
        <ul>
          ${uniqueAdvices.map(a => `<li>${a}</li>`).join("")}
        </ul>
      `;

      // 재회
      const reunionScore = getReunionProbability(result1.avgScore, result2.avgScore);
      document.getElementById('reunionScore').textContent = reunionScore;
      const reComment = getReunionComment(reunionScore);

      // 재회팁
      const tipCount = Math.floor(Math.random() * 2) + 2; // 2~3개
      let pickTips = [];
      for(let i=0; i<tipCount; i++){
        const tip = pickRandom(reunionTips);
        if(!pickTips.includes(tip)) pickTips.push(tip);
      }
      const tipsHtml = pickTips.map(t => `<li>${t}</li>`).join("");

      document.getElementById('reunionAdvice').innerHTML = `
        <p>${reComment}</p>
        <div style="margin-top:10px;font-weight:bold;">재회를 위해 이런 팁은 어떤가요?</div>
        <ul>
          ${tipsHtml}
        </ul>
      `;

      // 김구라 톤 코멘트
      const comment = getKimguraComment(compScore);
      document.getElementById('kimguraComment').innerHTML = comment;

      // 결과 표시
      document.getElementById('result').style.display = 'block';
    }
  </script>
</body>
</html>
